<div class="container">
<h1 class="my-5">My Friendships</h1>




<h5>Pending Requests Received</h5>
<div class="cards mb-5">
<% @receiver_friendships.each do |friendship| %>
  <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
    url(<%= cl_image_path friendship.asker.profile.photo.key if friendship.asker.profile.photo.attached? %>)">
    <%= link_to friendship.asker.profile.name, profile_path(friendship.asker.profile) %>
    <%= simple_form_for([:user, friendship], remote: true) do |f| %>
        <%= f.input :status, as: :select, collection: ["accepted", "rejected"] %>
        <%= f.submit 'Confirm', class: "btn btn-warning" %>
    <% end %>
  </div>
<% end %>
</div>





<h5>Pending Requests Sent</h5>

<div class="cards mb-5">
<% @asker_friendships.each do |friendship| %>
  <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
    url(<%= cl_image_path friendship.receiver.profile.photo.key if friendship.receiver.profile.photo.attached? %>)">
    <%= link_to friendship.receiver.profile.name, profile_path(friendship.receiver.profile) %>
    <%= link_to "Cancel request", user_friendship_path(friendship), data: { confirm: 'Are you sure?'}, method: :delete, remote: true, class: "btn btn-danger" %>
  </div>
<% end %>
</div>

<h5>My friends</h5>

<div class="cards mb-5">
<% @friendships.each do |friendship| %>
  <% profile = current_user == friendship.receiver ? friendship.asker.profile : friendship.receiver.profile %>
  <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
    url(<%= cl_image_path profile.photo.key if profile.photo.attached? %>)">
    <%= link_to profile.name, profile_path(profile) %>
  </div>
<% end %>
</div>

</div>
