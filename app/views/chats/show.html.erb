<div class="container">

  <h1>with <%= @partner_profile.name %></h1>
  <%= cl_image_tag @partner_profile.photo.key if @partner_profile.photo.attached? %>
  <div id="messages" data-chat-id="<%= @chat.id %>">
    <% @chat.messages.each do |message| %>
      <% if message.user.profile && message.user.profile.photo.attached? %>
        <%= cl_image_tag message.user.profile.photo.key, width: 40, height: 40, gravity: :face, crop: :fill, class: "avatar" %>
      <% else %>
        <%= image_tag "https://res.cloudinary.com/tungtzet/image/upload/v1597161724/hands-touching_rr7yp2.jpg", class: "avatar" %>
      <% end %>
      <div class="message-container" id="message-<%= message.id %>">
        <i class="author">
          <span><%= message.user.email %></span>
          <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
        </i>
        <p><%= message.content %></p>
      </div>
    <% end %>
  </div>

  <%= simple_form_for [ @chat, @message ], remote: true do |f| %>
    <%= f.input :content, label: false, placeholder: "type something" %>
  <% end %>

</div>